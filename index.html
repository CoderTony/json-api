<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>JSON API by brixen</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>JSON API</h1>
          <h2></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/brixen/jsonapi/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/brixen/jsonapi/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/brixen/jsonapi" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>JSON API</h1>

<p><strong>This document is a work-in-progress and subject to revision. This document will clearly state when it is considered a final version and what that version number is.</strong></p>

<h2>Top Level</h2>

<p>The top-level of a JSON API document has the following keys:</p>

<ul>
<li>Resource names (<code>posts</code>, <code>comments</code>, <code>people</code>, etc.)</li>
<li>A <code>meta</code> section</li>
</ul><h2>Singular Resources</h2>

<p>If the value of a resource name is a JSON object, it represents a single document.</p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// an individual post document</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>Resource Collections</h2>

<p>If the value of a resource name is a JSON array, it represents a list of documents.</p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">[{</span>
    <span class="c1">// an individual post document</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="c1">// an individual post document</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>

<h2>JSON API Document</h2>

<p>A JSON API document is a list of key/value pairs that represent either attributes or relationships.</p>

<p>Attribute or relationship keys <strong>SHOULD</strong> be camelcased.</p>

<h3>Attributes</h3>

<p>An attribute's value can be any JSON value:</p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s2">"Rails is Omakase"</span><span class="p">,</span>
    <span class="nx">commentCount</span><span class="o">:</span> <span class="mi">23</span>
    <span class="nx">isDraft</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>To-Many Relationships (Using IDs)</h3>

<p>To specify a to-many relationship that points to a list of IDs, include it under a <code>"rels"</code> key: </p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Rails is Omakase"</span><span class="p">,</span>
    <span class="s2">"rels"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"comments"</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">17</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>If a to-many relationship is specified as a list of IDs, it <strong>SHOULD</strong> be possible to fetch a collection of the related documents by making a simple <code>GET</code> request with a URL composed of:</p>

<ul>
<li>The URL of the current document</li>
<li>The part of relationship name converted to underscore format</li>
<li>A <code>?</code> followed by the list of IDs, comma-separated<br>
</li>
</ul><h3>To-Many Relationships (Using URLs)</h3>

<p>To specify a to-many relationship that points to a URL, include it under a <code>"rels"</code> key:</p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Rails is Omakase"</span><span class="p">,</span>
    <span class="s2">"rels"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"comments"</span><span class="o">:</span> <span class="p">{</span> <span class="s2">"url"</span><span class="o">:</span> <span class="s2">"http://example.com/posts/1/comments"</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>If a to-many relationship is specified as a URL, it <strong>MUST</strong> be possible to fetch a collection of the related documents by using a simple <code>GET</code> request to the specified URL.</p>

<h3>To-Many Relationships (Using URL Templates)</h3>

<p>You may also specify a URL template for a relationship as both an array of IDs and a URL template (using <code>{ids}</code> as the parameter):</p>

<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">"posts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="o">:</span> <span class="s2">"Rails is Omakase"</span><span class="p">,</span>
    <span class="s2">"rels"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"comments"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"url"</span><span class="o">:</span> <span class="s2">"http://example.com/posts/1/comments/{ids}"</span><span class="p">,</span>
        <span class="s2">"ids"</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>If a to-many relationship is specified both as a URL and an array of IDs, it <strong>MUST</strong> be possible to fetch a collection of the related documents by:</p>

<ul>
<li>Expanding the URL template by substituting the array of IDs into the <code>{ids}</code> variable. This will result in it being replaced with the comma-separated list of IDs.</li>
<li>Performing a simple <code>GET</code> on the expanded URL</li>
</ul><h3>To-One Relationships (Using ID)</h3>

<p>To specify a to-one relationship that points to an ID, use a relationship name with an <code>ID</code> suffix whose value is a JSON String or Number.</p>

<pre><code>{
  "posts": {
    "id": 1,
    "title": "Rails is Omakase"
    "rels": {
      "author": 9,
    }
  }
}
</code></pre>

<p>If a to-many relationship is specified as an ID, it <strong>SHOULD</strong> be possible to fetch the related documents by making a simple <code>GET</code> request with a URL composed of:</p>

<ul>
<li>The URL of the current document</li>
<li>A <code>/</code> followed by the part of relationship name before the <code>ID</code> suffix, converted to underscore format</li>
<li>A <code>/</code> followed by the ID</li>
</ul><h3>To-One Relationships (Using URL)</h3>

<p>To specify a to-one relationship that points to a URL, use a relationship name with a <code>URL</code> suffix whose value is a URL.</p>

<pre><code>{
  "posts": {
    "id": 1,
    "title": "Rails is Omakase",
    "rels": {
      "author": { "url": "http://example.com/posts/1/author" },
    }
  }
}
</code></pre>

<p>If a to-many relationship is specified as a URL, it <strong>MUST</strong> be possible to fetch the related document by using a simple <code>GET</code> request to the specified URL.</p>

<h3>A Resource With Multiple Documents</h3>

<p>So far, all resources have contained a single document. You may want to combine multiple documents into a single resource to reduce HTTP queries.</p>

<pre><code>{
  "rels": {
    "posts.author": "http://example.com/people/{posts.id}",
    "posts.comments": "http://example.com/{posts.id}/comments/{posts.comments.ids}"
  },
  "posts": [{
    "id": 1,
    "title": "Rails is Omakase",
    "rels": {
      "comments": [ 1, 2, 5, 17 ]
      "author": 17
    }
  }, {
    "id": 2,
    "title": "The Parley Letter",
    "rels": {
      "comments": [ 3, 4, 6 ]
      "author": 17
    }
  }],
  "http://example.com/people/{id}": [{
    "id": 17,
    "twitterName": "@d2h"
  }]
}
</code></pre>

<p>In this case, each relationship specifies a type to link it with </p>

<h3>Meta Sections</h3>
        </section>

        <footer>
          JSON API is maintained by <a href="https://github.com/brixen">brixen</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("&lt;script&gt;   (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,&#39;script&#39;,&#39;//www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);    ga(&#39;create&#39;, &#39;UA-40609539-1&#39;, &#39;jsonapi.org&#39;);   ga(&#39;send&#39;, &#39;pageview&#39;);  &lt;/script&gt;");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>